"use strict";

require("babel-polyfill");

require("newrelic");

var _logger = require("./logger");

var _ = require(".");

_.NewRelicLogDeliveryAgent.configure({
  minLogItems: 5,
  minLogItemsToForce: 10
});

var label = '????';
var log = (0, _logger.withLogger)(label);
log.info('doing things');
var count = 0;
var target = 109;

function doDelayedWrite() {
  console.log("\x1B[4mcake\x1B[0m");
  setTimeout(function () {
    log.info('' + ++count, {
      count: count
    });

    if (count < target) {
      doDelayedWrite();
    } else {
      _.NewRelicLogDeliveryAgent.getInstance().shutdown();
    }
  }, 1000);
}

console.log('start loop');
doDelayedWrite();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy90ZXN0LnRzIl0sIm5hbWVzIjpbIk5ld1JlbGljTG9nRGVsaXZlcnlBZ2VudCIsImNvbmZpZ3VyZSIsIm1pbkxvZ0l0ZW1zIiwibWluTG9nSXRlbXNUb0ZvcmNlIiwibGFiZWwiLCJsb2ciLCJpbmZvIiwiY291bnQiLCJ0YXJnZXQiLCJkb0RlbGF5ZWRXcml0ZSIsImNvbnNvbGUiLCJzZXRUaW1lb3V0IiwiZ2V0SW5zdGFuY2UiLCJzaHV0ZG93biJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQUEsMkJBQXlCQyxTQUF6QixDQUFtQztBQUMvQkMsRUFBQUEsV0FBVyxFQUFFLENBRGtCO0FBRS9CQyxFQUFBQSxrQkFBa0IsRUFBRTtBQUZXLENBQW5DOztBQUlBLElBQU1DLEtBQUssR0FBRyxNQUFkO0FBRUEsSUFBTUMsR0FBRyxHQUFHLHdCQUFXRCxLQUFYLENBQVo7QUFDQUMsR0FBRyxDQUFDQyxJQUFKLENBQVMsY0FBVDtBQUNBLElBQUlDLEtBQUssR0FBRyxDQUFaO0FBQ0EsSUFBSUMsTUFBTSxHQUFHLEdBQWI7O0FBRUEsU0FBU0MsY0FBVCxHQUEwQjtBQUN0QkMsRUFBQUEsT0FBTyxDQUFDTCxHQUFSLENBQVksb0JBQVo7QUFDQU0sRUFBQUEsVUFBVSxDQUFDLFlBQU07QUFDYk4sSUFBQUEsR0FBRyxDQUFDQyxJQUFKLENBQVMsS0FBSSxFQUFFQyxLQUFmLEVBQXVCO0FBQUVBLE1BQUFBLEtBQUssRUFBRUE7QUFBVCxLQUF2Qjs7QUFDQSxRQUFJQSxLQUFLLEdBQUdDLE1BQVosRUFBb0I7QUFDaEJDLE1BQUFBLGNBQWM7QUFDakIsS0FGRCxNQUVPO0FBQ0hULGlDQUF5QlksV0FBekIsR0FBdUNDLFFBQXZDO0FBQ0g7QUFDSixHQVBTLEVBT1AsSUFQTyxDQUFWO0FBUUg7O0FBQ0RILE9BQU8sQ0FBQ0wsR0FBUixDQUFZLFlBQVo7QUFDQUksY0FBYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBcImJhYmVsLXBvbHlmaWxsXCI7XG5pbXBvcnQgXCJuZXdyZWxpY1wiO1xuaW1wb3J0IHsgd2l0aExvZ2dlciB9IGZyb20gJy4vbG9nZ2VyJztcbmltcG9ydCB7IE5ld1JlbGljTG9nRGVsaXZlcnlBZ2VudCB9IGZyb20gJy4nO1xuXG5OZXdSZWxpY0xvZ0RlbGl2ZXJ5QWdlbnQuY29uZmlndXJlKHtcbiAgICBtaW5Mb2dJdGVtczogNSxcbiAgICBtaW5Mb2dJdGVtc1RvRm9yY2U6IDEwXG59KVxuY29uc3QgbGFiZWwgPSAnPz8/Pyc7XG5cbmNvbnN0IGxvZyA9IHdpdGhMb2dnZXIobGFiZWwpO1xubG9nLmluZm8oJ2RvaW5nIHRoaW5ncycpO1xubGV0IGNvdW50ID0gMDtcbmxldCB0YXJnZXQgPSAxMDk7XG5cbmZ1bmN0aW9uIGRvRGVsYXllZFdyaXRlKCkge1xuICAgIGNvbnNvbGUubG9nKCdcXHUwMDFCWzRtY2FrZVxcdTAwMUJbMG0nKTtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgbG9nLmluZm8oJycrKCsrY291bnQpLCB7IGNvdW50OiBjb3VudCB9KTtcbiAgICAgICAgaWYgKGNvdW50IDwgdGFyZ2V0KSB7XG4gICAgICAgICAgICBkb0RlbGF5ZWRXcml0ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgTmV3UmVsaWNMb2dEZWxpdmVyeUFnZW50LmdldEluc3RhbmNlKCkuc2h1dGRvd24oKTtcbiAgICAgICAgfVxuICAgIH0sIDEwMDApO1xufVxuY29uc29sZS5sb2coJ3N0YXJ0IGxvb3AnKVxuZG9EZWxheWVkV3JpdGUoKTtcbiJdfQ==