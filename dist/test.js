"use strict";

require("babel-polyfill");

require("newrelic");

var _logger = require("./logger");

var _ = require(".");

_.NewRelicLogDeliveryAgent.configure({
  minLogItems: 5
});

var label = '????';
var log = (0, _logger.withLogger)(label);
log.info('doing things');
var count = 0;
var target = 10;

function doDelayedWrite() {
  console.log('doing');
  setTimeout(function () {
    log.info("count: ".concat(++count));

    if (count < target) {
      doDelayedWrite();
    } else {
      _.NewRelicLogDeliveryAgent.getInstance().shutdown();
    }
  }, 1000);
}

console.log('start loop');
doDelayedWrite();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy90ZXN0LnRzIl0sIm5hbWVzIjpbIk5ld1JlbGljTG9nRGVsaXZlcnlBZ2VudCIsImNvbmZpZ3VyZSIsIm1pbkxvZ0l0ZW1zIiwibGFiZWwiLCJsb2ciLCJpbmZvIiwiY291bnQiLCJ0YXJnZXQiLCJkb0RlbGF5ZWRXcml0ZSIsImNvbnNvbGUiLCJzZXRUaW1lb3V0IiwiZ2V0SW5zdGFuY2UiLCJzaHV0ZG93biJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQUEsMkJBQXlCQyxTQUF6QixDQUFtQztBQUMvQkMsRUFBQUEsV0FBVyxFQUFFO0FBRGtCLENBQW5DOztBQUdBLElBQU1DLEtBQUssR0FBRyxNQUFkO0FBRUEsSUFBTUMsR0FBRyxHQUFHLHdCQUFXRCxLQUFYLENBQVo7QUFDQUMsR0FBRyxDQUFDQyxJQUFKLENBQVMsY0FBVDtBQUNBLElBQUlDLEtBQUssR0FBRyxDQUFaO0FBQ0EsSUFBSUMsTUFBTSxHQUFHLEVBQWI7O0FBRUEsU0FBU0MsY0FBVCxHQUEwQjtBQUN0QkMsRUFBQUEsT0FBTyxDQUFDTCxHQUFSLENBQVksT0FBWjtBQUNBTSxFQUFBQSxVQUFVLENBQUMsWUFBTTtBQUNiTixJQUFBQSxHQUFHLENBQUNDLElBQUosa0JBQW1CLEVBQUVDLEtBQXJCOztBQUNBLFFBQUlBLEtBQUssR0FBR0MsTUFBWixFQUFvQjtBQUNoQkMsTUFBQUEsY0FBYztBQUNqQixLQUZELE1BRU87QUFDSFIsaUNBQXlCVyxXQUF6QixHQUF1Q0MsUUFBdkM7QUFDSDtBQUNKLEdBUFMsRUFPUCxJQVBPLENBQVY7QUFRSDs7QUFDREgsT0FBTyxDQUFDTCxHQUFSLENBQVksWUFBWjtBQUNBSSxjQUFjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFwiYmFiZWwtcG9seWZpbGxcIjtcbmltcG9ydCBcIm5ld3JlbGljXCI7XG5pbXBvcnQgeyB3aXRoTG9nZ2VyIH0gZnJvbSAnLi9sb2dnZXInO1xuaW1wb3J0IHsgTmV3UmVsaWNMb2dEZWxpdmVyeUFnZW50IH0gZnJvbSAnLic7XG5cbk5ld1JlbGljTG9nRGVsaXZlcnlBZ2VudC5jb25maWd1cmUoe1xuICAgIG1pbkxvZ0l0ZW1zOiA1XG59KVxuY29uc3QgbGFiZWwgPSAnPz8/Pyc7XG5cbmNvbnN0IGxvZyA9IHdpdGhMb2dnZXIobGFiZWwpO1xubG9nLmluZm8oJ2RvaW5nIHRoaW5ncycpO1xubGV0IGNvdW50ID0gMDtcbmxldCB0YXJnZXQgPSAxMDtcblxuZnVuY3Rpb24gZG9EZWxheWVkV3JpdGUoKSB7XG4gICAgY29uc29sZS5sb2coJ2RvaW5nJyk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGxvZy5pbmZvKGBjb3VudDogJHsrK2NvdW50fWApO1xuICAgICAgICBpZiAoY291bnQgPCB0YXJnZXQpIHtcbiAgICAgICAgICAgIGRvRGVsYXllZFdyaXRlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBOZXdSZWxpY0xvZ0RlbGl2ZXJ5QWdlbnQuZ2V0SW5zdGFuY2UoKS5zaHV0ZG93bigpO1xuICAgICAgICB9XG4gICAgfSwgMTAwMCk7XG59XG5jb25zb2xlLmxvZygnc3RhcnQgbG9vcCcpXG5kb0RlbGF5ZWRXcml0ZSgpO1xuIl19